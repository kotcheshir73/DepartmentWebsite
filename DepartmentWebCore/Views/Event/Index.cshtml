@model WebInterfaces.ViewModels.EventPageViewModel

@{
    ViewData["Title"] = "Event";
}

<h2 class="page-header">Новости</h2>

@if (User.IsInRole("Преподаватель"))
{
    <div class="btn btn-default">
        @Html.ActionLink("Добавить новость", "CreateEvent", null, new { @style = "color: #333333 !important ; text-decoration: none !important ;" })
    </div>
}
@if (Model != null)
{
    @foreach (var ev in Model?.List)
    {
        <p></p>
        @:Автор: @ev.DepartmentUser
        @:Дата: @ev.Date <br />
        @Html.ActionLink(@ev.Title, "Event", new { id = ev.Id })<br />
        @:Текст: @ev.Content<br />
        @if (User.IsInRole("Преподаватель") && ev.DepartmentUser.Contains(User.Identity.Name))
        {
            @:<div class="btn btn-default">
                @Html.ActionLink("Изменить", "EditEvent", new { id = ev.Id })
            @:</div>
            @:<div class="btn btn-default">
                @Html.ActionLink("Удалить", "DeleteEvent", new { id = ev.Id })
            @:</div>
        }
    }

    @*@for (int i = Model.CurrentPage - 4 < 0 ? 0 : Model.CurrentPage - 4; i < Model.MaxCount; i++)
        {
            @Html.ActionLink((i + 1).ToString(), "Index", new { page = i })
        }*@

    @for (int i = Model.CurrentPage - 4 < 0 ? 0 : Model.CurrentPage - 4, j = 0; i < Model.MaxCount && j < 10; i++, j++)
    {
        if (i == Model.CurrentPage)
        {
            <div id="pag" style="color:red"> @Html.ActionLink((i + 1).ToString(), "Index", new { page = i })</div>
        }
        else
        {
            @Html.ActionLink((i + 1).ToString(), "Index", new { page = i })
        }
    }
}
