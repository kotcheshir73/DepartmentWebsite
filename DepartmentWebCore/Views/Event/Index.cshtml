@model WebInterfaces.ViewModels.NewsPageViewModel

@{
    ViewData["Title"] = "Новости";
}

<h2 class="page-header">Новости</h2>

@if (User.IsInRole("Преподаватель"))
{
    <div class="but" >
        <form asp-action="CreateEvent" asp-controller="Event" method="get">
            <input type="submit" value="Добавить новость" class="btn btn-default" />
        </form>
    </div>    

}
@if (Model != null)
{
    @foreach (var news in Model?.List)
    {
        <p></p>
        @:Автор: @news.DepartmentUser от @news.Date <br />
        <h2>@Html.ActionLink(news.Title, "Event", new { id = news.Id })</h2><br />

        <div style="margin:0 0 0 15px"> @news.Body</div><br />

        @if (news.DepartmentUserId.ToString() == User.Identity.Name)
        {

            <div class="btn btn-default">
                @Html.ActionLink("Изменить", "EditNews", new { id = news.Id }, new { style = "text-decoration:none; color:#333333"})
            </div>
            <div class="btn btn-default">
                @Html.ActionLink("Удалить", "DeleteNews", new { id = news.Id, page = Model.CurrentPage}, new { style = "text-decoration:none; color:#333333"})
            </div>
        }

        <hr />
    }

    <p align="center" style="font-size:18px">
        @for (int i = Model.CurrentPage - 4 < 0 ? 0 : Model.CurrentPage - 4, j = 0; i < Model.MaxCount && j < 10; i++, j++)
        {
            if (i == Model.CurrentPage)
            {
                <b id="pag" style="color:#ff6a00;"> @(i+1) </b>
            }
            else
            {
                @Html.ActionLink((i + 1).ToString(), "Index", new { page = i })
            }
        }
    </p>
}
